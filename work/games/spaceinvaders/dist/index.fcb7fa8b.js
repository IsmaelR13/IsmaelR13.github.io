let e={type:Phaser.AUTO,width:800,height:600,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:{preload:function(){this.load.image("shooter","assets/cannon.svg"),this.load.image("alien1","assets/enemy.svg"),this.load.image("bullet","assets/bullet.svg"),this.load.image("saucer","assets/saucer.svg"),this.load.image("alien2","assets/enemyLevel2.svg"),this.load.image("alien3","assets/enemyLevel3.svg")},create:function(){scene=this,cursors=scene.input.keyboard.createCursorKeys(),keyA=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),keyD=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D),enemies=this.physics.add.staticGroup(),playerLava=scene.add.rectangle(0,0,800,10,0).setOrigin(0),enemyLava=scene.add.rectangle(0,590,800,10,0).setOrigin(0),saucerLava=scene.add.rectangle(790,0,10,600,0).setOrigin(0),scene.physics.add.existing(playerLava),scene.physics.add.existing(enemyLava),scene.physics.add.existing(saucerLava),(shooter=scene.physics.add.sprite(400,560,"shooter")).setCollideWorldBounds(!0),scoreText=scene.add.text(16,16,`Score: ${l}`,{fontSize:"18px",fill:"#FFF"}),livesText=scene.add.text(696,16,"Lives: 3",{fontSize:"18px",fill:"#FFF"}),startText=scene.add.text(400,300,"Click to Play",{fontSize:"18px",fill:"#FFF"}).setOrigin(.5),levelText=scene.add.text(16,564,`Level: ${i}`,{fontSize:"18px",fill:"#FFF"}),this.input.keyboard.on("keydown-SPACE",y),h.push(new w(scene,50,450)),h.push(new w(scene,370,450)),h.push(new w(scene,690,450)),this.input.on("pointerdown",function(){!1==a?(a=!0,startText.destroy(),setInterval(I,15e3)):y()}),p()},update:function(){!0==a&&(cursors.left.isDown||keyA.isDown?shooter.setVelocityX(-160):cursors.right.isDown||keyD.isDown?shooter.setVelocityX(160):shooter.setVelocityX(0)),4===i&&(n.stop(),o.stop(),s.stop(),t.stop(),alert("You Win! Score: "+l),location.reload())}}};new Phaser.Game(e),enemyInfo={width:40,height:20,count:{row:5,col:9},offset:{top:100,left:60},padding:5};let t=new Howl({src:["assets/move.mp3"]}),s=new Howl({src:["assets/shoot.mp3"]}),n=new Howl({src:["assets/explosion.mp3"]}),o=new Howl({src:["assets/saucer.mp3"],loop:!0}),i=1,l=0,a=!1,h=[],d=0;function y(){!0==a&&!1===isShooting&&(function(e){e.setVelocityY(-380);let t=setInterval(function(){enemies.children.each(function(s){m(e,s)&&(e.destroy(),clearInterval(t),isShooting=!1,s.destroy(),l++,scoreText.setText("Score: "+l),n.play(),l-d==enemyInfo.count.col*enemyInfo.count.row*i&&(i++,levelText.setText(`Level: ${i}`),setTimeout(()=>{p()},5e3)))},this);for(let s=0;s<h.length;s++)h[s].checkCollision(e)&&(e.destroy(),clearInterval(t),isShooting=!1,scoreText.setText(`Score: ${l}`),n.play(),l-d==enemyInfo.count.col*enemyInfo.count.row*i&&(i++,levelText.setText(`Level: ${i}`),setTimeout(()=>{p()},5e3)));for(let s=0;s<x.length;s++){let a=x[s];m(e,a)&&(e.destroy(),clearInterval(t),isShooting=!1,scoreText.setText(`Score: ${l}`),n.play(),l-d==enemyInfo.count.col*enemyInfo.count.row*i&&(i++,levelText.setText(`Level: ${i}`),setTimeout(()=>{p()},5e3)),a.destroy(),a.isDestroyed=!0,o.stop(),l++,d++)}},10);scene.physics.add.overlap(e,playerLava,function(){e.destroy(),clearInterval(t),n.play(),isShooting=!1})}(scene.physics.add.sprite(shooter.x,shooter.y,"bullet")),isShooting=!0,s.play())}function p(){for(c=0;c<enemyInfo.count.col;c++)for(r=0;r<enemyInfo.count.row;r++){let e=c*(enemyInfo.width+enemyInfo.padding)+enemyInfo.offset.left,t=r*(enemyInfo.height+enemyInfo.padding)+enemyInfo.offset.top;enemies.create(e,t,"alien"+i).setOrigin(.5)}}setInterval(function(){!0===a&&(t.play(),30===u&&(f="right"===f?"left":"right",u=0),"right"===f?enemies.children.each(function(e){e.x=e.x+10,e.body.reset(e.x,e.y)},this):enemies.children.each(function(e){e.x=e.x-10,e.body.reset(e.x,e.y)},this),u++)},1e3);let u=0,f="right",g=200*i-100;function v(e,t){let s=Phaser.Math.Angle.BetweenPoints(t,shooter);scene.physics.velocityFromRotation(s,g,e.body.velocity),g+=2;let o=setInterval(function(){m(e,shooter)&&(e.destroy(),clearInterval(o),livesText.setText("Lives: 3"),n.play());for(let t=0;t<h.length;t++)h[t].checkCollision(e)&&(e.destroy(),clearInterval(o),isShooting=!1,scoreText.setText(`Score: ${l}`),n.play())},10);scene.physics.add.overlap(e,enemyLava,function(){e.destroy(),n.play(),clearInterval(o)})}function m(e,t){let s=e.getBounds(),n=t.getBounds();return Phaser.Geom.Intersects.RectangleToRectangle(s,n)}setInterval(function(){if(!0===a){let e=enemies.children.entries[Phaser.Math.Between(0,enemies.children.entries.length-1)];v(scene.physics.add.sprite(e.x,e.y,"bullet"),e)}},3e3/i+500);let x=[];function I(){var e;!0==a&&(e=scene.physics.add.sprite(0,60,"saucer"),x.push(e),e.isDestroyed=!1,e.setVelocityX(100*i),scene.physics.add.overlap(e,saucerLava,function(){e.destroy(),e.isDestroyed=!0,o.stop()}),o.play())}setInterval(function(){if(!0==a)for(let e=0;e<x.length;e++){let t=x[e];!1==t.isDestroyed?v(scene.physics.add.sprite(t.x,t.y,"bullet"),t):x.splice(e,1)}},2e3);class w{constructor(e,t,s){let n=t;this.children=[],this.scene=e;for(let i=0;i<3;i++){for(let t=0;t<3;t++){var o=e.add.rectangle(n,s,30,20,5651757);e.physics.add.existing(o),o.health=2,this.children.push(o),n+=o.displayWidth}n=t,s+=o.displayHeight}this.children[this.children.length-2].destroy(),this.children.splice(this.children.length-2,1)}checkCollision(e){let t=!1;for(let s=0;s<this.children.length;s++){let n=this.children[s];if(m(e,n)){t=!0,1===this.children[s].health?(n.destroy(),this.children.splice(s,1)):this.children[s].health--;break}}return t}}
//# sourceMappingURL=index.fcb7fa8b.js.map
